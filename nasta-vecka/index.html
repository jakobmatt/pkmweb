<!DOCTYPE html>
<html lang='sv'>
	<head>
		<meta charset='utf-8' />
		<link href='./packages/core/main.css' rel='stylesheet' />
        <link href='./packages/bootstrap/main.css' rel='stylesheet' />
		<link href='./packages/list/main.css' rel='stylesheet' />

		<script src='./packages/core/main.js'></script>
        <script src='./packages/bootstrap/main.js'></script>
		<script src='./packages/core/locales-all.js'></script>
		<script src='./packages/list/main.js'></script>
		<script src='./packages/google-calendar/main.js'></script>

		<script>

        function getUrlVars() {
            var vars = {};
            var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                vars[key] = value;
                });
            return vars;
        }

        function getUrlParam(parameter, defaultvalue){
            var urlparameter = defaultvalue;
            if(window.location.href.indexOf(parameter) > -1) {
                urlparameter = getUrlVars()[parameter];
                //document.write("value of " + parameter + " is " + urlparameter);
            }
            return urlparameter;
        }

		document.addEventListener('DOMContentLoaded', function() {
            var initialLocaleCode = 'sv';
			var calendarEl = document.getElementById('calendar');

			var calendar = new FullCalendar.Calendar(calendarEl, {
                // an array of strings! [ 'dayGrid', 'timeGrid', 'list' ]
                plugins: [ 'bootstrap', 'list', 'googleCalendar' ],

                themeSystem: 'bootstrap',
    			displayEventTime: true, // show the time column in list view
                header: { 
                    left: '', 
                    center: 'title', 
                    right: 'prev,next today'
                },
    			height: "parent",

    			// To make your own Google API key, follow the directions here:
    			// http://fullcalendar.io/docs/google_calendar/
    			googleCalendarApiKey: 'AIzaSyBrT1Kwv8jumSOpOSr8NcQ2bEHi49DYVNU',

    			// Calendar - Elvanto - event rensad 
    			events: '1qv8joj1hnumb2guqjpofoj3f0@group.calendar.google.com',
                //eventTextColor: '#ffffff',
    			eventClick: function(arg) {
    				// opens events in a popup window
    			//	window.open(arg.event.url, 'google-calendar-event', 'width=700,height=600');
    
    				arg.jsEvent.preventDefault() // don't navigate in main tab
    			},
                defaultView: 'list',
                duration: { days: parseInt(getUrlParam('dagar', '8')) }, // default 8 days
                buttonIcons: true, // show the prev/next text
                locale: initialLocaleCode,
                navLinks: false, // can click day/week names to navigate views
                editable: false,
    			loading: function(bool) {
    				document.getElementById('loading').style.display =
    				  bool ? 'block' : 'none';
    			}
    
    		});

            //calendar.changeView('listWeek');
            //calendar.gotoDate( new Date() );
            calendar.setOption('themeSystem', 'darkly');
    		calendar.render();
		});

		</script>
		<style>

		  body {
			margin: 40px 10px;
			padding: 0;
			font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
			font-size: 14px;
			background-color: #555555;
		  }
		  
		  h1 {
		    color: #ffffff;
		  }

          #top,
          #calendar.fc-unthemed {
            font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
          }

          #top .selector {
            display: inline-block;
            margin-right: 10px;
          }

		  #loading {
			display: none;
			position: absolute;
			top: 10px;
			right: 10px;
		  }

		  #calendar {
			max-width: 800px;
			margin: 0 auto;
		  }

		</style>
	</head>
	<body>

	    <div id='loading'>uppdaterar...</div>
        //style='display:none'
        <div data-theme-system="bootstrap" class='selector' >
            <select>
                <option value='cyborg'>Cyborg</option>
                <option value='darkly' selected>Darkly</option>
            </select>
        </div>

        <center>
            <h1>N&auml;sta vecka</h1>
            <div id='calendar'></div>
        </center>

	</body>
</html>
